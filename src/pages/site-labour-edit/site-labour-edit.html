
<ion-header>

  <ion-navbar>
    <ion-title>Edit Labour</ion-title>
  </ion-navbar>

</ion-header>


<ion-content>
  <ion-item-group>
    <ion-item-divider color="primary">
    	Site : {{displayText.siteName}} / Task : {{displayText.taskDescription}}
    </ion-item-divider>
	<ion-item color="light">
		  <ion-label>Labour Id</ion-label>
		  <ion-input 
		  	disabled="true"
			[(ngModel)] = "selectedLabour.labourId" 
			type="text"   
			#labourId="ngModel">		
		  </ion-input>
	</ion-item>
	<ion-item color="light">
		  <ion-label>Description</ion-label>
		  <ion-input 
		  	disabled="true"
			[(ngModel)] = "selectedLabour.labourDescription" 
			type="text"   
			#labourDescription="ngModel">		
		  </ion-input>
	</ion-item>	
	<ion-item color="light">
		  <ion-label>Contractor</ion-label>
		  <ion-input 
		    disabled="{{selectedLabour.approved}}"
			[(ngModel)] = "selectedLabour.contractor" 
			type="text"   
			#contractor="ngModel">		
		  </ion-input>
	</ion-item>	
	<ion-item color="light">
		  <ion-label>Contract Type</ion-label>
		  <ion-select
		  	 disabled="{{selectedLabour.approved}}"
			 [(ngModel)] = "selectedLabour.contractType" 
			 #contractType="ngModel">
			 <ion-option 
			 	*ngFor="let cntrctType of contractTypeList" 
			 	value='{{cntrctType.value}}'>
			 		{{cntrctType.text}}
			 </ion-option>
		  </ion-select>		  
	</ion-item>	
	<ion-item color="light">
		  <ion-label>Rate</ion-label>
		  <ion-input  
		    disabled="{{selectedLabour.approved}}"
			[(ngModel)] = "selectedLabour.rate" 
			type="text"   
			#rate="ngModel">		
		  </ion-input>
	</ion-item>		
	<ion-item color="light">
		  <ion-label>Currency</ion-label>
		  <ion-input 
		  	disabled="true"
			[(ngModel)] = "selectedLabour.currency" 
			type="text"   
			#currency="ngModel">		
		  </ion-input>
	</ion-item>	
	<ion-item color="light">
		  <ion-label>Count</ion-label>
		  <ion-input 
		  	disabled="{{selectedLabour.approved}}"
			[(ngModel)] = "selectedLabour.count" 
			type="text"   
			#count="ngModel">		
		  </ion-input>
	</ion-item>	
	<ion-item color="light" *ngIf="viewFinance()">
		  <ion-label>Total Bill</ion-label>
		  <ion-input 
		  	disabled="true"
			[(ngModel)] = "selectedLabour.totalBill" 
			type="text"   
			#totalBill="ngModel">		
		  </ion-input>
	</ion-item>	
	<ion-item color="light" *ngIf="viewFinance()">
		  <ion-label>Total Payment</ion-label>
		  <ion-input 
		  	disabled="true"
			[(ngModel)] = "selectedLabour.totalPayment" 
			type="text"   
			#totalBill="ngModel">		
		  </ion-input>
	</ion-item>					
	<ion-item>
		<button 
			color="primary" 
			ion-button *ngIf="selectedLabour.active && selectedLabour.approved"
			(click)="deActivateLabour()"> 
			De-Activate 
		</button>
		<button 
			color="primary" 
			ion-button *ngIf="!selectedLabour.active && selectedLabour.approved"
			(click)="activateLabour()"> 
			Activate 
		</button>			
		<button 
			color="primary" 
			ion-button *ngIf="!selectedLabour.approved"
			(click)="editLabour()"> 
			Update 
		</button>
		<button 
			color="primary" 
			ion-button *ngIf="!selectedLabour.approved"
			(click)="approveLabour()"> 
			Approve 
		</button>
		<button 
			color="light" 
			ion-button *ngIf="!canCreateBill  && viewFinance()">
			Create Bill 
		</button>			
		<button 
			color="primary" 
			ion-button *ngIf="selectedLabour.approved && canCreateBill && selectedLabour.active"
			(click)="addLabourBilling()">
			Create Bill 
		</button>			
		<button 
			color="primary" 
			ion-button *ngIf="selectedLabour.approved && viewFinance() && canCreateNewBill()"
			(click)="editLabourBilling()">
			Manage Billing 
		</button> 
	</ion-item>
  </ion-item-group>
</ion-content>
